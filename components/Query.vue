<template>
  <div class="pt-20">
    <h2>ğŸ“¦ Products</h2>

    <div v-if="pending">Loading...</div>
    <div v-else-if="error">âŒ {{ error.message }}</div>
    <ul v-else>
      <li v-for="product in data.products" :key="product.name">
        <strong>{{ product.name }}</strong><br />
        ğŸ’° Price: {{ product.current_price }} EUR
        <span v-if="product.previous_price">
          (was {{ product.previous_price }} EUR)
        </span><br />
        ğŸ¬ Retailer: {{ product.retailer.name }}<br />
        ğŸ· Categories:
        <span v-for="cat in product.categories" :key="cat.title">{{ cat.title }}</span>
      </li>
    </ul>
  </div>
</template>

<script setup lang="ts">
const { data, pending, error } = await useFetch('/api/query/Krema*')
</script>
